# 如何获取和测试APK - 详细指南

## 📝 步骤1：推送代码到GitHub

### 1.1 打开命令行
- 在Windows中打开 PowerShell 或命令提示符
- 切换到项目目录：
```bash
cd E:\code\zhaoxiangguan
```

### 1.2 推送代码
```bash
git push -f origin main
```

### 1.3 如果推送失败
- **错误：Connection reset** → 等待几分钟再试
- **错误：Authentication failed** → 检查GitHub登录状态
- **错误：包含敏感信息** → 代码已清理，可以强制推送

### 1.4 验证推送成功
- 访问：https://github.com/727141750-cell/zhaoxiangguan-web
- 应该能看到最新的代码提交

---

## 🤖 步骤2：查看GitHub Actions构建

### 2.1 进入Actions页面
1. 在GitHub仓库页面
2. 点击顶部的 "Actions" 标签
3. 会看到 "Build APK" 工作流

### 2.2 查看构建进度
- **黄色点** = 正在构建
- **绿色✓** = 构建成功
- **红色✗** = 构建失败

### 2.3 构建时间
- 首次构建：约5-10分钟
- 后续构建：约3-5分钟

### 2.4 如果构建失败
点击红色的构建任务 → 查看 "Build APK" 步骤的错误信息

---

## 📥 步骤3：下载APK

### 方法A：从Actions下载（推荐）

1. **进入成功的构建任务**
   - 点击绿色的构建任务
   - 滚动到页面底部

2. **下载APK**
   - 找到 "Artifacts" 部分
   - 点击 "release-apk" 下载
   - 解压zip文件
   - 找到 `app-release.apk`

### 方法B：从Summary页面下载

1. 在构建任务页面
2. 点击右上角的 "Summary"
3. 在 Artifacts 区域下载文件

---

## 📱 步骤4：安装APK到手机

### 4.1 传输APK到手机

**方法1：通过数据线**
```bash
# 使用ADB安装（如果已启用USB调试）
adb install app-release.apk
```

**方法2：通过云盘/文件传输**
- 百度网盘、阿里云盘等
- 微信文件传输助手
- QQ我的电脑

**方法3：直接下载**
- 将APK上传到临时文件服务器
- 在手机浏览器中下载

### 4.2 安装APK

1. **在手机上找到APK文件**
   - 通常在 "下载" 文件夹
   - 或文件管理器的 "Download" 目录

2. **点击安装**
   - 如果提示"允许安装未知来源应用"
   - 进入 "设置" → "安全" → 允许

3. **完成安装**
   - 点击"安装"
   - 等待安装完成
   - 点击"打开"

---

## 🧪 步骤5：测试应用功能

### 5.1 准备工作
- 确保手机连接网络
- 准备好测试照片
- 打开 `TESTING_CHECKLIST.md` 对照测试

### 5.2 按照测试清单测试

参考项目中的 `TESTING_CHECKLIST.md` 文件，逐项测试：

1. ✅ 应用启动
2. ✅ 用户登录
3. ✅ 照片上传
4. ✅ 风格选择
5. ✅ 图片生成
6. ✅ 图片下载
7. ✅ 个人中心

### 5.3 记录问题

在测试过程中，记录以下信息：
- **遇到的问题**：具体描述
- **复现步骤**：如何触发问题
- **预期结果**：应该发生什么
- **实际结果**：实际发生了什么
- **截图**：如果可能，提供截图

---

## 🐛 步骤6：报告Bug

### 6.1 Bug报告格式

```
Bug #1: [简短描述]

**位置**：哪个页面/功能
**问题**：详细描述
**步骤**：
1. 步骤1
2. 步骤2
3. 步骤3

**预期**：应该怎样
**实际**：实际怎样
**严重**：高/中/低
```

### 6.2 报告方式

直接告诉我发现的问题，例如：
> "登录时，输入手机号后点击发送验证码，没有反应"

---

## 🔁 步骤7：修复Bug

### 7.1 我会修复
- 根据您的bug报告
- 修改代码
- 提交新的版本

### 7.2 重新测试
- 推送新代码到GitHub
- GitHub自动构建新APK
- 下载并重新测试

---

## 📊 步骤8：测试通过后

### 8.1 确认所有功能正常
- 所有核心功能可用
- 无严重bug
- 用户体验良好

### 8.2 准备上架材料
- ✅ 应用图标（已完成）
- ✅ 应用截图（参考 Screenshots_Guide.md）
- ✅ 应用描述（参考 STORE_LISTING.md）
- ✅ 隐私政策（已实现）
- ✅ 用户协议（已实现）

### 8.3 提交应用商店
- Google Play
- 或国内应用商店（华为、小米等）

---

## ⚠️ 常见问题

### Q1: GitHub Actions构建失败？
**A**: 查看构建日志，通常是因为代码错误或依赖问题。告诉我具体的错误信息。

### Q2: APK安装失败？
**A**:
- 检查Android版本（需要5.0+）
- 允许安装未知来源应用
- 尝试卸载旧版本再安装

### Q3: 应用无法连接服务器？
**A**:
- 检查网络连接
- 确认服务器运行正常：http://121.5.33.130:3001/api/health
- 查看手机上的错误提示

### Q4: 图片生成失败？
**A**:
- 正常情况，免费API需要30-60秒
- 如果超过2分钟，可能是服务器问题
- 查看服务器日志：`pm2 logs zhaoxiangguan`

### Q5: 应用崩溃？
**A**:
- 记录崩溃时的操作
- 如果可能，记录错误日志
- 告诉我具体在哪一步崩溃

---

## 📞 需要帮助？

测试过程中遇到任何问题，随时告诉我：
1. 具体的问题描述
2. 如何复现
3. 错误信息或截图

我会立即帮您解决！

---

## ✅ 快速参考

- **项目目录**: `E:\code\zhaoxiangguan`
- **测试清单**: `TESTING_CHECKLIST.md`
- **截图指南**: `Screenshots_Guide.md`
- **应用描述**: `STORE_LISTING.md`
- **服务器地址**: http://121.5.33.130:3001
- **GitHub仓库**: https://github.com/727141750-cell/zhaoxiangguan-web

---

**祝测试顺利！** 🚀
